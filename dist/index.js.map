{"version":3,"sources":["../src/cli/index.tsx","../src/adapters/openrouter/client.ts","../src/adapters/ollama/client.ts","../src/core/config/loadConfig.ts","../src/core/config/schema.ts","../src/core/dataset/loadJsonl.ts","../src/core/dataset/schema.ts","../src/core/runner/orchestrator.ts","../src/core/prompts/candidatePrompt.ts","../src/core/prompts/judgePrompt.ts","../src/core/scoring/aggregate.ts","../src/core/runner/judge.ts","../src/core/runner/types.ts","../src/utils/backoff.ts","../src/utils/hash.ts","../src/core/runner/runId.ts","../src/utils/redaction.ts","../src/reports/json/exports.ts","../src/reports/html/renderHtml.ts","../src/storage/sqlite/migrate.ts","../src/storage/sqlite/db.ts","../src/storage/sqlite/runs.ts","../src/storage/sqlite/questions.ts","../src/storage/sqlite/results.ts","../src/core/scoring/diff.ts","../src/storage/sqlite/queries.ts","../src/ui/App.tsx","../src/ui/screens/RunScreen.tsx","../src/ui/components/ModelTable.tsx","../src/ui/components/LogsPanel.tsx","../src/ui/components/QuestionPanel.tsx","../src/ui/screens/SummaryScreen.tsx"],"sourcesContent":["#!/usr/bin/env node\nimport { buildApplication, buildCommand, buildRouteMap, numberParser, run } from '@stricli/core';\n\nimport { createOpenRouterClient } from '../adapters/openrouter/client';\nimport { createOllamaClient } from '../adapters/ollama/client';\nimport { loadConfig } from '../core/config/loadConfig';\nimport type { ApocbenchConfig } from '../core/config/schema';\nimport { loadJsonl } from '../core/dataset/loadJsonl';\nimport type { RunnerEvent } from '../core/runner/orchestrator';\nimport { runBenchmark } from '../core/runner/orchestrator';\nimport { diffSummaries, type RunSummary } from '../core/scoring/diff';\nimport { renderHtmlReport } from '../reports/html/renderHtml';\nimport { openAndMigrate } from '../storage/sqlite/migrate';\nimport { listRunModelResults } from '../storage/sqlite/queries';\nimport { App } from '../ui/App';\n\nimport fs from 'node:fs';\nimport path from 'node:path';\nimport { render } from 'ink';\n\ntype CliContext = {\n  process: NodeJS.Process;\n};\n\nfunction die(msg: string): never {\n  console.error(msg);\n  process.exit(1);\n}\n\ntype RunFlags = {\n  config: string;\n  dryRun?: boolean;\n  quiet?: boolean;\n  json?: boolean;\n  limit?: number;\n  categories?: readonly string[];\n  models?: readonly string[];\n};\n\nasync function runCommand(\n  this: CliContext,\n  flags: RunFlags,\n  runId?: string,\n): Promise<void | Error> {\n  const { config } = loadConfig(flags.config);\n  const dataset = loadJsonl(config.run.datasetPath);\n\n  const events: RunnerEvent[] = [];\n\n  const resolveModel = (m: ApocbenchConfig['models'][number]) => {\n    if (m.router === 'openrouter') {\n      const apiKey = process.env[config.routers.openrouter.apiKeyEnv];\n      if (!apiKey) die(`missing env var: ${config.routers.openrouter.apiKeyEnv}`);\n      const openrouter = createOpenRouterClient({\n        apiKey,\n        baseUrl: config.routers.openrouter.baseUrl,\n        headers: config.routers.openrouter.headers,\n      });\n      return openrouter(m.model);\n    }\n\n    const ollama = createOllamaClient({ baseUrl: config.routers.ollama.baseUrl });\n    return ollama(m.model);\n  };\n\n  const resolveJudgeModel = () => {\n    const apiKey = process.env[config.routers.openrouter.apiKeyEnv];\n    if (!apiKey) die(`missing env var: ${config.routers.openrouter.apiKeyEnv}`);\n    const openrouter = createOpenRouterClient({\n      apiKey,\n      baseUrl: config.routers.openrouter.baseUrl,\n      headers: config.routers.openrouter.headers,\n    });\n    return openrouter(config.judge.model);\n  };\n\n  const runPromise = runBenchmark({\n    config,\n    configPath: flags.config,\n    datasetPath: config.run.datasetPath,\n    datasetAbsolutePath: dataset.absolutePath,\n    questions: dataset.lines,\n    deps: { resolveModel, resolveJudgeModel, toolVersion: '1.0.0' },\n    dryRun: flags.dryRun ?? false,\n    runIdOverride: runId,\n    selectedModelIds: flags.models ? Array.from(flags.models) : undefined,\n    limitOverride: typeof flags.limit === 'number' ? flags.limit : null,\n    categoriesOverride: flags.categories ? Array.from(flags.categories) : null,\n    onEvent: e => {\n      events.push(e);\n      if (flags.json) process.stdout.write(JSON.stringify(e) + '\\n');\n    },\n  });\n\n  if (flags.quiet || flags.json) {\n    const r = await runPromise;\n    if (r && flags.json) process.stdout.write(JSON.stringify(r) + '\\n');\n    return;\n  }\n\n  render(<App runPromise={runPromise} events={events} />);\n}\n\ntype ValidateFlags = {\n  config: string;\n  quiet?: boolean;\n};\n\nasync function validateCommand(this: CliContext, flags: ValidateFlags): Promise<void> {\n  const { config } = loadConfig(flags.config);\n  const dataset = loadJsonl(config.run.datasetPath);\n  if (!flags.quiet) console.log(`config ok; dataset ok (${dataset.lines.length} questions)`);\n}\n\ntype ReportFlags = {\n  outDir?: string;\n};\n\nasync function reportCommand(this: CliContext, flags: ReportFlags, runId: string): Promise<void> {\n  const outDir = flags.outDir ?? './runs';\n  const db = openAndMigrate(path.resolve(process.cwd(), outDir, 'apocbench.sqlite'));\n  const rows = listRunModelResults(db, runId);\n  const byModel = new Map<string, { overallScore: number; autoFailCount: number }>();\n  for (const r of rows) {\n    const model = byModel.get(r.model_id) ?? { overallScore: 0, autoFailCount: 0 };\n    if (r.status === 'done' && typeof r.score_overall === 'number') model.overallScore += r.score_overall;\n    if (r.auto_fail === 1) model.autoFailCount += 1;\n    byModel.set(r.model_id, model);\n  }\n  const summary = {\n    runId,\n    models: Array.from(byModel.entries()).map(([modelId, m]) => ({\n      modelId,\n      overallScore: m.overallScore,\n      autoFailCount: m.autoFailCount,\n    })),\n  } satisfies RunSummary;\n\n  const runDir = path.resolve(process.cwd(), outDir, runId);\n  fs.mkdirSync(runDir, { recursive: true });\n  fs.writeFileSync(path.join(runDir, 'summary.json'), JSON.stringify(summary, null, 2));\n  fs.writeFileSync(path.join(runDir, 'report.html'), renderHtmlReport({ runId, summaryJson: summary }));\n  console.log(JSON.stringify(summary, null, 2));\n}\n\ntype DiffFlags = {\n  outDir?: string;\n};\n\nasync function diffCommand(\n  this: CliContext,\n  flags: DiffFlags,\n  runId1: string,\n  runId2: string,\n): Promise<void> {\n  const outDir = flags.outDir ?? './runs';\n  const db = openAndMigrate(path.resolve(process.cwd(), outDir, 'apocbench.sqlite'));\n\n  const toSummary = (runId: string): RunSummary => {\n    const rows = listRunModelResults(db, runId);\n    const byModel = new Map<string, { overallScore: number; autoFailCount: number }>();\n    for (const r of rows) {\n      const model = byModel.get(r.model_id) ?? { overallScore: 0, autoFailCount: 0 };\n      if (r.status === 'done' && typeof r.score_overall === 'number') model.overallScore += r.score_overall;\n      if (r.auto_fail === 1) model.autoFailCount += 1;\n      byModel.set(r.model_id, model);\n    }\n    return {\n      runId,\n      models: Array.from(byModel.entries()).map(([modelId, m]) => ({\n        modelId,\n        overallScore: m.overallScore,\n        autoFailCount: m.autoFailCount,\n      })),\n    };\n  };\n\n  console.log(JSON.stringify(diffSummaries(toSummary(runId1), toSummary(runId2)), null, 2));\n}\n\ntype ResumeFlags = RunFlags;\n\nasync function resumeCommand(\n  this: CliContext,\n  flags: ResumeFlags,\n  runId: string,\n): Promise<void | Error> {\n  console.log(`resuming run ${runId}`);\n  return runCommand.call(this, flags, runId);\n}\n\nconst root = buildRouteMap({\n  routes: {\n    run: buildCommand<RunFlags, [runId?: string], CliContext>({\n      docs: {\n        brief: 'Run benchmark',\n        customUsage: [\n          'run -c apocbench.yml [--dry-run] [--json] [--quiet] [--limit N] [--categories a,b]',\n          'run <runId> -c apocbench.yml  # resume by runId',\n        ],\n      },\n      parameters: {\n        flags: {\n          config: { kind: 'parsed', brief: 'Path to apocbench.yml', parse: s => s },\n          dryRun: { kind: 'boolean', brief: 'Validate only (no API calls)', optional: true },\n          quiet: { kind: 'boolean', brief: 'Suppress TUI output', optional: true },\n          json: { kind: 'boolean', brief: 'Emit JSONL events', optional: true },\n          limit: { kind: 'parsed', brief: 'Limit questions', optional: true, parse: numberParser },\n          categories: {\n            kind: 'parsed',\n            brief: 'Comma-separated categories',\n            optional: true,\n            variadic: ',',\n            parse: s => s,\n          },\n          models: {\n            kind: 'parsed',\n            brief: 'Comma-separated model ids to run (matches config models[].id)',\n            optional: true,\n            variadic: ',',\n            parse: s => s,\n          },\n        },\n        aliases: {\n          c: 'config',\n        },\n        positional: {\n          kind: 'tuple',\n          parameters: [\n            {\n              brief: 'Optional run id to resume',\n              optional: true,\n              parse: s => s,\n              placeholder: 'runId',\n            },\n          ],\n        },\n      },\n      func: runCommand,\n    }),\n    validate: buildCommand<ValidateFlags, [], CliContext>({\n      docs: { brief: 'Validate config and dataset' },\n      parameters: {\n        flags: {\n          config: { kind: 'parsed', brief: 'Path to apocbench.yml', parse: s => s },\n          quiet: { kind: 'boolean', brief: 'Suppress output', optional: true },\n        },\n        aliases: { c: 'config' },\n      },\n      func: validateCommand,\n    }),\n    report: buildCommand<ReportFlags, [runId: string], CliContext>({\n      docs: { brief: 'Generate run summary and HTML report' },\n      parameters: {\n        flags: {\n          outDir: {\n            kind: 'parsed',\n            brief: 'Output directory (defaults to ./runs)',\n            optional: true,\n            parse: s => s,\n          },\n        },\n        positional: {\n          kind: 'tuple',\n          parameters: [\n            {\n              brief: 'Run id',\n              parse: s => s,\n              placeholder: 'runId',\n            },\n          ],\n        },\n      },\n      func: reportCommand,\n    }),\n    diff: buildCommand<DiffFlags, [runId1: string, runId2: string], CliContext>({\n      docs: { brief: 'Diff two runs' },\n      parameters: {\n        flags: {\n          outDir: {\n            kind: 'parsed',\n            brief: 'Output directory (defaults to ./runs)',\n            optional: true,\n            parse: s => s,\n          },\n        },\n        positional: {\n          kind: 'tuple',\n          parameters: [\n            { brief: 'Run id 1', parse: s => s, placeholder: 'runId1' },\n            { brief: 'Run id 2', parse: s => s, placeholder: 'runId2' },\n          ],\n        },\n      },\n      func: diffCommand,\n    }),\n    resume: buildCommand<ResumeFlags, [runId: string], CliContext>({\n      docs: { brief: 'Resume a run by id (alias of run)' },\n      parameters: {\n        flags: {\n          config: { kind: 'parsed', brief: 'Path to apocbench.yml', parse: s => s },\n          dryRun: { kind: 'boolean', brief: 'Validate only (no API calls)', optional: true },\n          quiet: { kind: 'boolean', brief: 'Suppress TUI output', optional: true },\n          json: { kind: 'boolean', brief: 'Emit JSONL events', optional: true },\n          limit: { kind: 'parsed', brief: 'Limit questions', optional: true, parse: numberParser },\n          categories: {\n            kind: 'parsed',\n            brief: 'Comma-separated categories',\n            optional: true,\n            variadic: ',',\n            parse: s => s,\n          },\n          models: {\n            kind: 'parsed',\n            brief: 'Comma-separated model ids to run (matches config models[].id)',\n            optional: true,\n            variadic: ',',\n            parse: s => s,\n          },\n        },\n        aliases: { c: 'config' },\n        positional: {\n          kind: 'tuple',\n          parameters: [{ brief: 'Run id', parse: s => s, placeholder: 'runId' }],\n        },\n      },\n      func: resumeCommand,\n    }),\n  },\n  docs: { brief: 'apocbench: offline survival/apocalypse LLM benchmark runner' },\n});\n\nconst app = buildApplication<CliContext>(root, {\n  name: 'apocbench',\n  scanner: { caseStyle: 'allow-kebab-for-camel', allowArgumentEscapeSequence: true },\n});\n\nawait run(app, process.argv.slice(2), { process });\n","import { createOpenRouter } from '@openrouter/ai-sdk-provider';\n\nexport type OpenRouterClientOptions = {\n  apiKey: string;\n  baseUrl?: string;\n  headers?: Record<string, string>;\n};\n\nexport function createOpenRouterClient(opts: OpenRouterClientOptions) {\n  return createOpenRouter({\n    apiKey: opts.apiKey,\n    baseURL: opts.baseUrl,\n    headers: opts.headers,\n  });\n}\n","import { createOllama } from 'ollama-ai-provider-v2';\n\nexport type OllamaClientOptions = {\n  baseUrl: string;\n};\n\nexport function createOllamaClient(opts: OllamaClientOptions) {\n  return createOllama({\n    baseURL: opts.baseUrl,\n  });\n}\n","import fs from 'node:fs';\nimport path from 'node:path';\nimport YAML from 'yaml';\nimport { z } from 'zod';\nimport { configSchema, type ApocbenchConfig } from './schema';\n\nexport type LoadConfigResult = {\n  config: ApocbenchConfig;\n  raw: unknown;\n  absolutePath: string;\n};\n\nfunction parseConfigFile(contents: string, absolutePath: string): unknown {\n  const ext = path.extname(absolutePath).toLowerCase();\n  if (ext === '.json') return JSON.parse(contents);\n  return YAML.parse(contents, { strict: true });\n}\n\nexport function loadConfig(configPath: string): LoadConfigResult {\n  const absolutePath = path.resolve(process.cwd(), configPath);\n  const contents = fs.readFileSync(absolutePath, 'utf8');\n  const raw = parseConfigFile(contents, absolutePath);\n  const parsed = configSchema.safeParse(raw);\n  if (!parsed.success) {\n    throw new z.ZodError(parsed.error.issues);\n  }\n\n  return { config: parsed.data, raw, absolutePath };\n}\n","import { z } from 'zod';\n\nconst requestDefaultsSchema = z\n  .object({\n    temperature: z.number().nullable().optional(),\n    maxTokens: z.number().int().positive().optional(),\n    timeoutMs: z.number().int().positive().optional(),\n  })\n  .strict();\n\nconst openRouterRoutingSchema = z\n  .object({\n    requireParameters: z.boolean().optional(),\n    allowFallbacks: z.boolean().optional(),\n    order: z.array(z.string()).optional(),\n    only: z.array(z.string()).optional(),\n    ignore: z.array(z.string()).optional(),\n    sort: z.enum(['price', 'throughput', 'latency']).optional(),\n    dataCollection: z.enum(['allow', 'deny']).optional(),\n    zdr: z.boolean().optional(),\n    maxPrice: z\n      .object({\n        prompt: z.number().optional(),\n        completion: z.number().optional(),\n        request: z.number().optional(),\n        image: z.number().optional(),\n      })\n      .strict()\n      .optional(),\n    quantizations: z.array(z.string()).optional(),\n  })\n  .strict();\n\nexport const configSchema = z\n  .object({\n    run: z\n      .object({\n        name: z.string().min(1),\n        datasetPath: z.string().min(1),\n        outDir: z.string().min(1),\n        resume: z.boolean(),\n        questionLimit: z.number().int().positive().nullable().optional(),\n        categories: z.array(z.string().min(1)).nullable().optional(),\n        maxBudgetUsd: z.number().positive().nullable().optional(),\n        concurrency: z\n          .object({\n            candidate: z.number().int().positive(),\n            judge: z.number().int().positive(),\n          })\n          .strict(),\n      })\n      .strict(),\n\n    judge: z\n      .object({\n        router: z.literal('openrouter'),\n        model: z.string().min(1),\n        provider: z.string().min(1).optional(),\n        temperature: z.number().nullable().optional(),\n        maxTokens: z.number().int().positive(),\n        structured: z.boolean(),\n        routing: openRouterRoutingSchema.optional(),\n      })\n      .strict(),\n\n    routers: z\n      .object({\n        ollama: z\n          .object({\n            baseUrl: z.string().min(1),\n            apiKeyEnv: z.string().min(1).nullable().optional(),\n            default: requestDefaultsSchema,\n          })\n          .strict(),\n        openrouter: z\n          .object({\n            baseUrl: z.string().min(1),\n            apiKeyEnv: z.string().min(1),\n            headers: z.record(z.string(), z.string()).optional(),\n            default: requestDefaultsSchema,\n          })\n          .strict(),\n      })\n      .strict(),\n\n    models: z\n      .array(\n        z\n          .object({\n            id: z.string().min(1),\n            router: z.enum(['ollama', 'openrouter']),\n            model: z.string().min(1),\n            provider: z.string().min(1).optional(),\n            params: requestDefaultsSchema.optional(),\n            promptFormat: z.string().min(1).optional(),\n            routing: openRouterRoutingSchema.optional(),\n          })\n          .strict(),\n      )\n      .min(1),\n  })\n  .strict();\n\nexport type ApocbenchConfig = z.infer<typeof configSchema>;\n","import fs from 'node:fs';\nimport path from 'node:path';\nimport { z } from 'zod';\nimport { datasetLineSchema, type DatasetLine } from './schema';\n\nexport type LoadJsonlResult = {\n  absolutePath: string;\n  lines: DatasetLine[];\n};\n\nexport function loadJsonl(datasetPath: string): LoadJsonlResult {\n  const absolutePath = path.resolve(process.cwd(), datasetPath);\n  const contents = fs.readFileSync(absolutePath, 'utf8');\n  const rawLines = contents\n    .split(/\\r?\\n/)\n    .map(l => l.trim())\n    .filter(Boolean);\n\n  const lines: DatasetLine[] = [];\n  for (let i = 0; i < rawLines.length; i++) {\n    let parsedJson: unknown;\n    try {\n      parsedJson = JSON.parse(rawLines[i]);\n    } catch (err) {\n      throw new Error(`Invalid JSONL at ${datasetPath}:${i + 1}: ${(err as Error).message}`);\n    }\n\n    const parsed = datasetLineSchema.safeParse(parsedJson);\n    if (!parsed.success) {\n      const message = new z.ZodError(parsed.error.issues).message;\n      throw new Error(`Invalid dataset line at ${datasetPath}:${i + 1}: ${message}`);\n    }\n\n    lines.push(parsed.data);\n  }\n\n  return { absolutePath, lines };\n}\n","import { z } from 'zod';\n\nexport const rubricItemSchema = z\n  .object({\n    id: z.string().min(1),\n    text: z.string().min(1),\n    weight: z.number().positive().optional().default(1),\n    maxScore: z.number().positive().optional().default(1),\n  })\n  .strict();\n\nconst datasetRubricSchema = z.union([\n  z.array(z.string().min(1)).transform(values =>\n    values.map((text, index) => ({ id: `r${index + 1}`, text })),\n  ),\n  z.array(rubricItemSchema),\n]);\n\nexport const datasetLineSchema = z\n  .object({\n    id: z.string().min(1),\n    category: z.string().min(1),\n    difficulty: z.string().min(1),\n    scenario: z.array(z.string().min(1)),\n    prompt: z.string().min(1),\n    rubric: datasetRubricSchema,\n    auto_fail: z.array(z.string().min(1)),\n    version: z.string().min(1).optional(),\n    source: z.string().min(1).optional(),\n  })\n  .strict()\n  .transform(v => {\n    const rubric = v.rubric.map(r => ({\n      id: r.id,\n      text: r.text,\n      weight: 'weight' in r ? r.weight : 1,\n      maxScore: 'maxScore' in r ? r.maxScore : 1,\n    }));\n\n    return { ...v, rubric };\n  });\n\nexport type DatasetLine = z.infer<typeof datasetLineSchema>;\n","import fs from 'node:fs';\nimport path from 'node:path';\nimport PQueue from 'p-queue';\nimport { generateText } from 'ai';\nimport type { LanguageModel } from 'ai';\nimport type { ProviderOptions } from '@ai-sdk/provider-utils';\n\nimport type { ApocbenchConfig } from '../config/schema';\nimport type { DatasetLine } from '../dataset/schema';\nimport { buildCandidatePrompt } from '../prompts/candidatePrompt';\nimport { buildJudgePrompt } from '../prompts/judgePrompt';\nimport { aggregateModel } from '../scoring/aggregate';\nimport { computeOverallScore, judgeWithRepairRetry } from './judge';\nimport { makeRunId, promptTemplateHash } from './runId';\nimport type { CandidateMetrics, JudgeOutput } from './types';\nimport { sha256FileHex } from '../../utils/hash';\nimport { redactSecrets } from '../../utils/redaction';\nimport { computeBackoffMs, sleep } from '../../utils/backoff';\nimport { writeJson } from '../../reports/json/exports';\nimport { renderHtmlReport } from '../../reports/html/renderHtml';\nimport { openAndMigrate } from '../../storage/sqlite/migrate';\nimport { insertRun, updateRunStatus } from '../../storage/sqlite/runs';\nimport { insertQuestions } from '../../storage/sqlite/questions';\nimport { isResultDone, upsertResult } from '../../storage/sqlite/results';\n\nexport type RunnerEvent =\n  | { type: 'run_started'; runId: string }\n  | { type: 'question_started'; runId: string; modelId: string; questionId: string }\n  | { type: 'question_completed'; runId: string; modelId: string; questionId: string; overallScore: number }\n  | { type: 'question_failed'; runId: string; modelId: string; questionId: string; stage: 'candidate' | 'judge'; message: string }\n  | { type: 'budget_exceeded'; runId: string; maxBudgetUsd: number }\n  | { type: 'budget_spent'; runId: string; spentUsd: number }\n  | { type: 'run_completed'; runId: string };\n\nexport type RunnerDeps = {\n  resolveModel: (\n    modelEntry: ApocbenchConfig['models'][number],\n    config: ApocbenchConfig,\n  ) => LanguageModel;\n  resolveJudgeModel: (config: ApocbenchConfig) => LanguageModel;\n  toolVersion: string;\n};\n\nexport type RunResult = {\n  runId: string;\n  outDir: string;\n  summaryPath: string;\n  reportPath: string;\n};\n\nexport async function runBenchmark(params: {\n  config: ApocbenchConfig;\n  configPath: string;\n  datasetPath: string;\n  datasetAbsolutePath: string;\n  questions: DatasetLine[];\n  deps: RunnerDeps;\n  dryRun: boolean;\n  runIdOverride?: string;\n  selectedModelIds?: string[];\n  limitOverride?: number | null;\n  categoriesOverride?: string[] | null;\n  onEvent?: (e: RunnerEvent) => void;\n}): Promise<RunResult | null> {\n  const {\n    config,\n    datasetAbsolutePath,\n    questions: allQuestions,\n    deps,\n    dryRun,\n    selectedModelIds,\n    onEvent,\n  } = params;\n\n  const questionLimit = params.limitOverride ?? config.run.questionLimit ?? null;\n  const categories = params.categoriesOverride ?? config.run.categories ?? null;\n\n  let questions = allQuestions;\n  if (categories && categories.length > 0) {\n    const allowed = new Set(categories);\n    questions = questions.filter(q => allowed.has(q.category));\n  }\n  if (questionLimit != null) {\n    questions = questions.slice(0, questionLimit);\n  }\n\n  const datasetSha = sha256FileHex(datasetAbsolutePath);\n  const templateHash = promptTemplateHash('candidatePrompt:v1', 'judgePrompt:v1');\n\n  if (dryRun) return null;\n\n  const runId = params.runIdOverride ?? makeRunId(config.run.name);\n  const runOutDir = path.resolve(process.cwd(), config.run.outDir, runId);\n\n  onEvent?.({ type: 'run_started', runId });\n\n  const db = openAndMigrate(path.resolve(process.cwd(), config.run.outDir, 'apocbench.sqlite'));\n  const existingRun = db\n    .prepare('SELECT run_id FROM runs WHERE run_id = ?')\n    .get(runId) as { run_id: string } | undefined;\n  if (!existingRun) {\n    insertRun(db, {\n      run_id: runId,\n      created_at: new Date().toISOString(),\n      tool_version: deps.toolVersion,\n      config_json: JSON.stringify(config),\n      dataset_path: datasetAbsolutePath,\n      dataset_sha256: datasetSha,\n      prompt_template_hash: templateHash,\n      status: 'running',\n    });\n  } else {\n    updateRunStatus(db, runId, 'running');\n  }\n  insertQuestions(db, runId, questions);\n\n  const judgeModel = deps.resolveJudgeModel(config);\n\n  const models = config.models.filter(m =>\n    selectedModelIds && selectedModelIds.length > 0 ? selectedModelIds.includes(m.id) : true,\n  );\n\n  const judgeQueue = new PQueue({ concurrency: config.run.concurrency.judge });\n  const perModelQueue = new Map<string, PQueue>();\n\n  const perModelScores = new Map<\n    string,\n    Array<{ overallScore: number; autoFail: boolean; latencyMs: number; failed: boolean }>\n  >();\n\n  for (const model of models) {\n    perModelQueue.set(model.id, new PQueue({ concurrency: config.run.concurrency.candidate }));\n    perModelScores.set(model.id, []);\n  }\n\n  const maxBudgetUsd = config.run.maxBudgetUsd ?? null;\n  let spentUsd = 0;\n  let budgetExceededEmitted = false;\n\n  const tasks: Array<Promise<void>> = [];\n\n  async function generateTextWithRetry(call: Parameters<typeof generateText>[0]): Promise<\n    Awaited<ReturnType<typeof generateText>>\n  > {\n    const maxRetries = 3;\n    for (let attempt = 0; attempt <= maxRetries; attempt++) {\n      try {\n        return await generateText(call);\n      } catch (err) {\n        const msg = (err as Error).message;\n        const retryable = /429|5\\d\\d|timeout|ECONNRESET|ENOTFOUND/i.test(msg);\n        if (!retryable || attempt === maxRetries) throw err;\n        await sleep(computeBackoffMs(attempt, { retries: maxRetries, baseMs: 600, maxMs: 8000 }));\n      }\n    }\n    throw new Error('unreachable');\n  }\n\n  for (const modelEntry of models) {\n    const candidateModel = deps.resolveModel(modelEntry, config);\n    const modelQueue = perModelQueue.get(modelEntry.id)!;\n\n    for (const q of questions) {\n      tasks.push(\n        modelQueue.add(async () => {\n          if (maxBudgetUsd != null && spentUsd >= maxBudgetUsd) {\n            if (!budgetExceededEmitted) {\n              budgetExceededEmitted = true;\n              onEvent?.({ type: 'budget_exceeded', runId, maxBudgetUsd });\n            }\n            upsertResult(db, {\n              runId,\n              modelId: modelEntry.id,\n              questionId: q.id,\n              status: 'skipped',\n              errorJson: JSON.stringify({ reason: 'budget_exceeded' }),\n            });\n            return;\n          }\n\n          if (config.run.resume && isResultDone(db, runId, modelEntry.id, q.id)) {\n            return;\n          }\n\n          onEvent?.({ type: 'question_started', runId, modelId: modelEntry.id, questionId: q.id });\n\n          const candidatePrompt = buildCandidatePrompt(q);\n          const candidateStart = Date.now();\n\n          try {\n            const { text, usage } = await generateTextWithRetry({\n              model: candidateModel,\n              prompt: candidatePrompt,\n              temperature:\n                modelEntry.params?.temperature ??\n                config.routers[modelEntry.router].default.temperature ??\n                undefined,\n              maxOutputTokens:\n                modelEntry.params?.maxTokens ?? config.routers[modelEntry.router].default.maxTokens,\n              providerOptions: (modelEntry.router === 'openrouter'\n                ? {\n                    openrouter: {\n                      provider: modelEntry.provider,\n                      ...(modelEntry.routing ? { routing: modelEntry.routing } : {}),\n                    },\n                  }\n                : undefined) as ProviderOptions | undefined,\n            });\n\n            const metrics: CandidateMetrics = {\n              latencyMs: Date.now() - candidateStart,\n              usage,\n              costUsd: undefined,\n            };\n\n            upsertResult(db, {\n              runId,\n              modelId: modelEntry.id,\n              questionId: q.id,\n              candidatePrompt,\n              candidateCompletion: text,\n              candidateMetricsJson: JSON.stringify(metrics),\n              status: 'candidate_failed',\n            });\n\n            // Candidate cost tracking is provider-specific; tracked from judge raw response for now.\n\n            await judgeQueue.add(async () => {\n              const judgePrompt = buildJudgePrompt({ question: q, candidateAnswer: text });\n              try {\n                const { object, raw } = await judgeWithRepairRetry({\n                  model: judgeModel,\n                  prompt: judgePrompt,\n                  maxTokens: config.judge.maxTokens,\n                  temperature: config.judge.temperature,\n                  providerOptions: {\n                    openrouter: {\n                      provider: config.judge.provider,\n                      ...(config.judge.routing ? { routing: config.judge.routing } : {}),\n                    },\n                  } as ProviderOptions,\n                });\n\n                const computed = computeOverallScore({\n                  judgeOutput: object,\n                  rubric: q.rubric.map(r => ({ id: r.id, weight: r.weight, maxScore: r.maxScore })),\n                });\n\n                const judgeParsed: JudgeOutput = {\n                  ...object,\n                  overall_score: computed.overallScore,\n                };\n\n                const judgeCost = (raw as unknown as { providerMetadata?: { openrouter?: { cost?: unknown } } })\n                  ?.providerMetadata?.openrouter?.cost;\n                if (typeof judgeCost === 'number') {\n                  spentUsd += judgeCost;\n                  onEvent?.({ type: 'budget_spent', runId, spentUsd });\n                }\n\n                const redactedRequest = redactSecrets({\n                  model: config.judge.model,\n                  provider: config.judge.provider,\n                });\n\n                db.transaction(() => {\n                  upsertResult(db, {\n                    runId,\n                    modelId: modelEntry.id,\n                    questionId: q.id,\n                    judgeRequestJson: JSON.stringify(redactedRequest),\n                    judgeResponseJson: JSON.stringify(raw),\n                    judgeParsedJson: JSON.stringify(judgeParsed),\n                    scoreOverall: computed.overallScore,\n                    scoreRubricJson: JSON.stringify(computed.rubricScores),\n                    autoFail: judgeParsed.auto_fail,\n                    autoFailReason: judgeParsed.auto_fail_reason,\n                    status: 'done',\n                  });\n                })();\n\n                perModelScores.get(modelEntry.id)!.push({\n                  overallScore: computed.overallScore,\n                  autoFail: judgeParsed.auto_fail,\n                  latencyMs: metrics.latencyMs,\n                  failed: false,\n                });\n\n                onEvent?.({\n                  type: 'question_completed',\n                  runId,\n                  modelId: modelEntry.id,\n                  questionId: q.id,\n                  overallScore: computed.overallScore,\n                });\n              } catch (err) {\n                const message = (err as Error).message;\n                upsertResult(db, {\n                  runId,\n                  modelId: modelEntry.id,\n                  questionId: q.id,\n                  status: 'judge_failed',\n                  errorJson: JSON.stringify({ message }),\n                });\n                perModelScores.get(modelEntry.id)!.push({\n                  overallScore: 0,\n                  autoFail: false,\n                  latencyMs: metrics.latencyMs,\n                  failed: true,\n                });\n                onEvent?.({\n                  type: 'question_failed',\n                  runId,\n                  modelId: modelEntry.id,\n                  questionId: q.id,\n                  stage: 'judge',\n                  message,\n                });\n              }\n            });\n          } catch (err) {\n            const message = (err as Error).message;\n            upsertResult(db, {\n              runId,\n              modelId: modelEntry.id,\n              questionId: q.id,\n              candidatePrompt,\n              status: 'candidate_failed',\n              errorJson: JSON.stringify({ message }),\n            });\n            perModelScores.get(modelEntry.id)!.push({\n              overallScore: 0,\n              autoFail: false,\n              latencyMs: 0,\n              failed: true,\n            });\n            onEvent?.({\n              type: 'question_failed',\n              runId,\n              modelId: modelEntry.id,\n              questionId: q.id,\n              stage: 'candidate',\n              message,\n            });\n          }\n        }),\n      );\n    }\n  }\n\n  await Promise.all(tasks);\n  await judgeQueue.onIdle();\n\n  const summaries = Array.from(perModelScores.entries()).map(([modelId, scores]) =>\n    aggregateModel({ modelId, questionScores: scores }),\n  );\n\n  const summary = {\n    runId,\n    createdAt: new Date().toISOString(),\n    datasetPath: datasetAbsolutePath,\n    datasetSha256: datasetSha,\n    judge: { model: config.judge.model, provider: config.judge.provider },\n    models: summaries,\n  };\n\n  const summaryPath = path.join(runOutDir, 'summary.json');\n  writeJson(summaryPath, summary);\n\n  const reportPath = path.join(runOutDir, 'report.html');\n  const html = renderHtmlReport({ runId, summaryJson: summary });\n  fs.mkdirSync(runOutDir, { recursive: true });\n  fs.writeFileSync(reportPath, html);\n\n  updateRunStatus(db, runId, 'completed');\n  onEvent?.({ type: 'run_completed', runId });\n  return { runId, outDir: runOutDir, summaryPath, reportPath };\n}","import type { DatasetLine } from '../dataset/schema';\n\nexport function buildCandidatePrompt(question: DatasetLine): string {\n  const scenario = question.scenario.map(s => `- ${s}`).join('\\n');\n  return [\n    'You are an offline survival assistant. Be practical, conservative, and step-by-step.',\n    'State assumptions and uncertainties. Include safety checks and stop-work triggers when relevant.',\n    '',\n    `Question: ${question.id}`,\n    `Category: ${question.category}`,\n    `Difficulty: ${question.difficulty}`,\n    '',\n    'Scenario:',\n    scenario,\n    '',\n    'Task:',\n    question.prompt,\n  ].join('\\n');\n}\n","import type { DatasetLine } from '../dataset/schema';\n\nexport function buildJudgePrompt(params: {\n  question: DatasetLine;\n  candidateAnswer: string;\n}): string {\n  const { question, candidateAnswer } = params;\n  const scenario = question.scenario.map(s => `- ${s}`).join('\\n');\n  const rubric = question.rubric\n    .map(r => `- ${r.id} (max ${r.maxScore}, weight ${r.weight}): ${r.text}`)\n    .join('\\n');\n  const autoFail = question.auto_fail.map(a => `- ${a}`).join('\\n');\n\n  return [\n    'You are a strict evaluator. Output ONLY valid JSON matching the requested schema.',\n    'Score each rubric item by id with a number within [0, maxScore].',\n    'If auto_fail triggers, set auto_fail=true, overall_score=0, and include a reason.',\n    'Keep notes concise and specific.',\n    '',\n    `Question: ${question.id}`,\n    `Category: ${question.category}`,\n    `Difficulty: ${question.difficulty}`,\n    '',\n    'Scenario:',\n    scenario,\n    '',\n    'Task prompt:',\n    question.prompt,\n    '',\n    'Rubric:',\n    rubric,\n    '',\n    'Auto-fail conditions:',\n    autoFail,\n    '',\n    'Candidate answer:',\n    candidateAnswer,\n  ].join('\\n');\n}\n","import type { ModelRunSummary } from '../runner/types';\n\nexport type AggregateInput = {\n  modelId: string;\n  questionScores: Array<{\n    overallScore: number;\n    autoFail: boolean;\n    latencyMs: number;\n    failed: boolean;\n  }>;\n};\n\nfunction median(values: number[]): number | null {\n  if (values.length === 0) return null;\n  const sorted = [...values].sort((a, b) => a - b);\n  const mid = Math.floor(sorted.length / 2);\n  return sorted.length % 2 === 0\n    ? (sorted[mid - 1] + sorted[mid]) / 2\n    : sorted[mid];\n}\n\nexport function aggregateModel(input: AggregateInput): ModelRunSummary {\n  const totalQuestions = input.questionScores.length;\n  const completed = input.questionScores.filter(q => !q.failed).length;\n  const failures = input.questionScores.filter(q => q.failed).length;\n  const autoFailCount = input.questionScores.filter(q => q.autoFail).length;\n  const overallScore = input.questionScores.reduce((acc, q) => acc + q.overallScore, 0);\n  const latencies = input.questionScores.filter(q => !q.failed).map(q => q.latencyMs);\n\n  return {\n    modelId: input.modelId,\n    totalQuestions,\n    completed,\n    failures,\n    autoFailCount,\n    overallScore,\n    rubricScoreSum: overallScore,\n    medianLatencyMs: median(latencies),\n  };\n}\n","import { generateObject, type LanguageModel } from 'ai';\nimport type { z } from 'zod';\nimport type { ProviderOptions } from '@ai-sdk/provider-utils';\nimport { judgeOutputSchema, type JudgeOutput } from './types';\nimport { computeBackoffMs, sleep } from '../../utils/backoff';\n\nexport type JudgeRequest = {\n  model: LanguageModel;\n  prompt: string;\n  maxTokens: number;\n  temperature: number | null | undefined;\n  providerOptions?: ProviderOptions;\n};\n\nexport async function judgeOnce(req: JudgeRequest): Promise<{\n  object: JudgeOutput;\n  raw: unknown;\n}> {\n  const result = await generateObject({\n    model: req.model,\n    schema: judgeOutputSchema as z.ZodTypeAny,\n    prompt: req.prompt,\n    maxOutputTokens: req.maxTokens,\n    temperature: req.temperature ?? undefined,\n    providerOptions: req.providerOptions,\n  });\n\n  return { object: result.object as JudgeOutput, raw: result.response };\n}\n\nexport async function judgeWithRepairRetry(req: JudgeRequest): Promise<{\n  object: JudgeOutput;\n  raw: unknown;\n  didRepairRetry: boolean;\n}> {\n  try {\n    const { object, raw } = await judgeOnce(req);\n    return { object, raw, didRepairRetry: false };\n  } catch (err) {\n    const retryPrompt =\n      req.prompt +\n      '\\n\\nIMPORTANT: Repair your output to be strictly valid JSON matching the schema. Output JSON only.';\n    const shouldRetry = true;\n    if (!shouldRetry) throw err;\n\n    const backoff = computeBackoffMs(0, { retries: 1, baseMs: 800, maxMs: 4000 });\n    await sleep(backoff);\n    const { object, raw } = await judgeOnce({ ...req, prompt: retryPrompt });\n    return { object, raw, didRepairRetry: true };\n  }\n}\n\nexport function computeOverallScore(params: {\n  judgeOutput: JudgeOutput;\n  rubric: Array<{ id: string; weight: number; maxScore: number }>;\n}): {\n  overallScore: number;\n  rubricScores: Record<string, number>;\n} {\n  const { judgeOutput, rubric } = params;\n  const rubricScores: Record<string, number> = {};\n  let sum = 0;\n\n  for (const item of rubric) {\n    const raw = judgeOutput.rubric_scores[item.id] ?? 0;\n    const bounded = Math.max(0, Math.min(item.maxScore, raw));\n    rubricScores[item.id] = bounded;\n    sum += bounded * item.weight;\n  }\n\n  return { overallScore: judgeOutput.auto_fail ? 0 : sum, rubricScores };\n}\n","import { z } from 'zod';\n\nexport const judgeOutputSchema = z\n  .object({\n    rubric_scores: z.record(z.string(), z.number()),\n    auto_fail: z.boolean(),\n    auto_fail_reason: z.string().optional(),\n    overall_score: z.number(),\n    notes: z.string(),\n    unsafe_flags: z.array(z.string()).optional(),\n  })\n  .strict();\n\nexport type JudgeOutput = z.infer<typeof judgeOutputSchema>;\n\nexport type CandidateMetrics = {\n  latencyMs: number;\n  usage?: unknown;\n  costUsd?: number;\n};\n\nexport type ModelRunSummary = {\n  modelId: string;\n  totalQuestions: number;\n  completed: number;\n  failures: number;\n  autoFailCount: number;\n  overallScore: number;\n  rubricScoreSum: number;\n  medianLatencyMs: number | null;\n};\n","export type BackoffOptions = {\n  retries: number;\n  baseMs: number;\n  maxMs: number;\n};\n\nexport function sleep(ms: number): Promise<void> {\n  return new Promise(resolve => setTimeout(resolve, ms));\n}\n\nexport function computeBackoffMs(attempt: number, opts: BackoffOptions): number {\n  const exp = Math.min(opts.maxMs, opts.baseMs * 2 ** attempt);\n  const jitter = exp * (0.2 * (Math.random() - 0.5) * 2);\n  return Math.max(0, Math.round(exp + jitter));\n}\n","import crypto from 'node:crypto';\nimport fs from 'node:fs';\n\nexport function sha256Hex(data: string | Buffer): string {\n  return crypto.createHash('sha256').update(data).digest('hex');\n}\n\nexport function sha256FileHex(filePath: string): string {\n  const data = fs.readFileSync(filePath);\n  return sha256Hex(data);\n}\n","import { sha256Hex } from '../../utils/hash';\n\nexport function formatUtcTimestampForRunId(d: Date): string {\n  const pad = (n: number) => String(n).padStart(2, '0');\n  return [\n    d.getUTCFullYear(),\n    pad(d.getUTCMonth() + 1),\n    pad(d.getUTCDate()),\n    '-',\n    pad(d.getUTCHours()),\n    pad(d.getUTCMinutes()),\n    pad(d.getUTCSeconds()),\n  ].join('');\n}\n\nexport function makeRunId(name: string, now: Date = new Date()): string {\n  const safeName = name\n    .toLowerCase()\n    .replace(/[^a-z0-9]+/g, '-')\n    .replace(/^-+|-+$/g, '')\n    .slice(0, 64);\n\n  return `${safeName}-${formatUtcTimestampForRunId(now)}`;\n}\n\nexport function promptTemplateHash(candidatePromptTemplate: string, judgePromptTemplate: string): string {\n  return sha256Hex(candidatePromptTemplate + '\\n---\\n' + judgePromptTemplate);\n}\n","export function redactSecrets(value: unknown): unknown {\n  if (value == null) return value;\n  if (typeof value === 'string') {\n    return value.replace(/(sk-[A-Za-z0-9_-]{8,})/g, 'sk-REDACTED');\n  }\n  if (Array.isArray(value)) return value.map(redactSecrets);\n  if (typeof value === 'object') {\n    const out: Record<string, unknown> = {};\n    for (const [k, v] of Object.entries(value as Record<string, unknown>)) {\n      const lower = k.toLowerCase();\n      if (lower.includes('authorization') || lower.includes('api_key') || lower.includes('apikey')) {\n        out[k] = 'REDACTED';\n      } else {\n        out[k] = redactSecrets(v);\n      }\n    }\n    return out;\n  }\n  return value;\n}\n","import fs from 'node:fs';\nimport path from 'node:path';\n\nexport function writeJson(filePath: string, data: unknown): void {\n  fs.mkdirSync(path.dirname(filePath), { recursive: true });\n  fs.writeFileSync(filePath, JSON.stringify(data, null, 2));\n}\n","export function renderHtmlReport(params: { runId: string; summaryJson: unknown }): string {\n  const summary = JSON.stringify(params.summaryJson, null, 2);\n  return `<!doctype html>\n<html>\n  <head>\n    <meta charset=\"utf-8\" />\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1\" />\n    <title>apocbench - ${escapeHtml(params.runId)}</title>\n    <style>\n      body { font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, monospace; margin: 24px; }\n      pre { background: #0b1020; color: #e6e6e6; padding: 16px; border-radius: 10px; overflow: auto; }\n    </style>\n  </head>\n  <body>\n    <h1>apocbench</h1>\n    <p>runId: <code>${escapeHtml(params.runId)}</code></p>\n    <pre>${escapeHtml(summary)}</pre>\n  </body>\n</html>`;\n}\n\nfunction escapeHtml(s: string): string {\n  return s\n    .replace(/&/g, '&amp;')\n    .replace(/</g, '&lt;')\n    .replace(/>/g, '&gt;')\n    .replace(/\"/g, '&quot;')\n    .replace(/'/g, '&#039;');\n}\n","import fs from 'node:fs';\nimport path from 'node:path';\nimport { openDb, type DbHandle } from './db';\n\nexport function migrate(db: DbHandle): void {\n  const schemaPath = path.resolve(\n    path.dirname(new URL(import.meta.url).pathname),\n    'schema.sql',\n  );\n  const sql = fs.readFileSync(schemaPath, 'utf8');\n  db.exec(sql);\n}\n\nexport function openAndMigrate(sharedDbPath: string): DbHandle {\n  const db = openDb(sharedDbPath);\n  migrate(db);\n  return db;\n}\n","import fs from 'node:fs';\nimport path from 'node:path';\nimport Database from 'better-sqlite3';\n\nexport type DbHandle = Database.Database;\n\nlet cachedDb: DbHandle | null = null;\n\nexport function openDb(sharedDbPath: string): DbHandle {\n  if (cachedDb) return cachedDb;\n\n  const absolutePath = path.resolve(process.cwd(), sharedDbPath);\n  fs.mkdirSync(path.dirname(absolutePath), { recursive: true });\n  const db = new Database(absolutePath);\n  db.pragma('journal_mode = WAL');\n  db.pragma('foreign_keys = ON');\n  cachedDb = db;\n  return db;\n}\n\nexport function closeDb(): void {\n  cachedDb?.close();\n  cachedDb = null;\n}\n","import type { DbHandle } from './db';\n\nexport type RunRow = {\n  run_id: string;\n  created_at: string;\n  tool_version: string;\n  config_json: string;\n  dataset_path: string;\n  dataset_sha256: string;\n  prompt_template_hash: string;\n  status: string;\n};\n\nexport function insertRun(db: DbHandle, row: RunRow): void {\n  db.prepare(\n    `\n    INSERT INTO runs (\n      run_id, created_at, tool_version, config_json, dataset_path,\n      dataset_sha256, prompt_template_hash, status\n    ) VALUES (\n      @run_id, @created_at, @tool_version, @config_json, @dataset_path,\n      @dataset_sha256, @prompt_template_hash, @status\n    )\n  `,\n  ).run(row);\n}\n\nexport function getRun(db: DbHandle, runId: string): RunRow | undefined {\n  return db.prepare('SELECT * FROM runs WHERE run_id = ?').get(runId) as RunRow | undefined;\n}\n\nexport function updateRunStatus(db: DbHandle, runId: string, status: string): void {\n  db.prepare('UPDATE runs SET status = ? WHERE run_id = ?').run(status, runId);\n}\n","import type { DbHandle } from './db';\nimport type { DatasetLine } from '../../core/dataset/schema';\n\nexport function insertQuestions(db: DbHandle, runId: string, questions: DatasetLine[]): void {\n  const stmt = db.prepare(\n    `\n    INSERT OR REPLACE INTO questions (\n      run_id, question_id, category, difficulty, scenario, prompt, rubric_json, auto_fail_json\n    ) VALUES (\n      @run_id, @question_id, @category, @difficulty, @scenario, @prompt, @rubric_json, @auto_fail_json\n    )\n  `,\n  );\n\n  const insertMany = db.transaction((rows: DatasetLine[]) => {\n    for (const q of rows) {\n      stmt.run({\n        run_id: runId,\n        question_id: q.id,\n        category: q.category,\n        difficulty: q.difficulty,\n        scenario: JSON.stringify(q.scenario),\n        prompt: q.prompt,\n        rubric_json: JSON.stringify(q.rubric),\n        auto_fail_json: JSON.stringify(q.auto_fail),\n      });\n    }\n  });\n\n  insertMany(questions);\n}\n","import type { DbHandle } from './db';\n\nexport type ResultStatus = 'done' | 'candidate_failed' | 'judge_failed' | 'skipped';\n\nexport type UpsertResultParams = {\n  runId: string;\n  modelId: string;\n  questionId: string;\n  candidatePrompt?: string;\n  candidateCompletion?: string;\n  candidateMetricsJson?: string;\n  judgeRequestJson?: string;\n  judgeResponseJson?: string;\n  judgeParsedJson?: string;\n  scoreOverall?: number;\n  scoreRubricJson?: string;\n  autoFail?: boolean;\n  autoFailReason?: string;\n  status: ResultStatus;\n  errorJson?: string;\n};\n\nexport function isResultDone(\n  db: DbHandle,\n  runId: string,\n  modelId: string,\n  questionId: string,\n): boolean {\n  const row = db\n    .prepare(\n      `\n      SELECT status, judge_parsed_json\n      FROM model_results\n      WHERE run_id = ? AND model_id = ? AND question_id = ?\n    `,\n    )\n    .get(runId, modelId, questionId) as { status?: string; judge_parsed_json?: string } | undefined;\n\n  return row?.status === 'done' && Boolean(row.judge_parsed_json);\n}\n\nexport function upsertResult(db: DbHandle, p: UpsertResultParams): void {\n  db.prepare(\n    `\n    INSERT INTO model_results (\n      run_id, model_id, question_id,\n      candidate_prompt, candidate_completion, candidate_metrics_json,\n      judge_request_json, judge_response_json, judge_parsed_json,\n      score_overall, score_rubric_json,\n      auto_fail, auto_fail_reason,\n      status, error_json\n    ) VALUES (\n      @run_id, @model_id, @question_id,\n      @candidate_prompt, @candidate_completion, @candidate_metrics_json,\n      @judge_request_json, @judge_response_json, @judge_parsed_json,\n      @score_overall, @score_rubric_json,\n      @auto_fail, @auto_fail_reason,\n      @status, @error_json\n    )\n    ON CONFLICT(run_id, model_id, question_id) DO UPDATE SET\n      candidate_prompt = COALESCE(excluded.candidate_prompt, model_results.candidate_prompt),\n      candidate_completion = COALESCE(excluded.candidate_completion, model_results.candidate_completion),\n      candidate_metrics_json = COALESCE(excluded.candidate_metrics_json, model_results.candidate_metrics_json),\n      judge_request_json = COALESCE(excluded.judge_request_json, model_results.judge_request_json),\n      judge_response_json = COALESCE(excluded.judge_response_json, model_results.judge_response_json),\n      judge_parsed_json = COALESCE(excluded.judge_parsed_json, model_results.judge_parsed_json),\n      score_overall = COALESCE(excluded.score_overall, model_results.score_overall),\n      score_rubric_json = COALESCE(excluded.score_rubric_json, model_results.score_rubric_json),\n      auto_fail = COALESCE(excluded.auto_fail, model_results.auto_fail),\n      auto_fail_reason = COALESCE(excluded.auto_fail_reason, model_results.auto_fail_reason),\n      status = excluded.status,\n      error_json = COALESCE(excluded.error_json, model_results.error_json)\n  `,\n  ).run({\n    run_id: p.runId,\n    model_id: p.modelId,\n    question_id: p.questionId,\n    candidate_prompt: p.candidatePrompt ?? null,\n    candidate_completion: p.candidateCompletion ?? null,\n    candidate_metrics_json: p.candidateMetricsJson ?? null,\n    judge_request_json: p.judgeRequestJson ?? null,\n    judge_response_json: p.judgeResponseJson ?? null,\n    judge_parsed_json: p.judgeParsedJson ?? null,\n    score_overall: p.scoreOverall ?? null,\n    score_rubric_json: p.scoreRubricJson ?? null,\n    auto_fail: p.autoFail == null ? null : p.autoFail ? 1 : 0,\n    auto_fail_reason: p.autoFailReason ?? null,\n    status: p.status,\n    error_json: p.errorJson ?? null,\n  });\n}\n","export type RunSummary = {\n  runId: string;\n  models: Array<{ modelId: string; overallScore: number; autoFailCount: number }>;\n};\n\nexport function diffSummaries(a: RunSummary, b: RunSummary) {\n  const byModel = (s: RunSummary) => new Map(s.models.map(m => [m.modelId, m] as const));\n  const am = byModel(a);\n  const bm = byModel(b);\n  const modelIds = Array.from(new Set([...am.keys(), ...bm.keys()])).sort();\n\n  return modelIds.map(id => {\n    const left = am.get(id);\n    const right = bm.get(id);\n    return {\n      modelId: id,\n      aOverall: left?.overallScore ?? null,\n      bOverall: right?.overallScore ?? null,\n      deltaOverall:\n        left && right ? Number((right.overallScore - left.overallScore).toFixed(6)) : null,\n      aAutoFail: left?.autoFailCount ?? null,\n      bAutoFail: right?.autoFailCount ?? null,\n    };\n  });\n}\n","import type { DbHandle } from './db';\n\nexport type ModelResultRow = {\n  run_id: string;\n  model_id: string;\n  question_id: string;\n  score_overall: number | null;\n  auto_fail: number | null;\n  status: string;\n  candidate_metrics_json: string | null;\n};\n\nexport function listRunModelResults(db: DbHandle, runId: string): ModelResultRow[] {\n  return db\n    .prepare(\n      `\n      SELECT run_id, model_id, question_id, score_overall, auto_fail, status, candidate_metrics_json\n      FROM model_results\n      WHERE run_id = ?\n    `,\n    )\n    .all(runId) as ModelResultRow[];\n}\n","import React, { useMemo, useState } from 'react';\nimport { Box, Text, useInput } from 'ink';\nimport type { RunnerEvent } from '../core/runner/orchestrator';\nimport { RunScreen } from './screens/RunScreen';\nimport { SummaryScreen } from './screens/SummaryScreen';\n\nexport function App(props: {\n  runPromise: Promise<{ runId: string; outDir: string; summaryPath: string; reportPath: string } | null>;\n  events: RunnerEvent[];\n}) {\n  const [done, setDone] = useState<{\n    runId: string;\n    outDir: string;\n    summaryPath: string;\n    reportPath: string;\n  } | null>(null);\n\n  useMemo(() => {\n    props.runPromise\n      .then(r => {\n        setDone(r);\n      })\n      .catch(err => {\n        setDone({\n          runId: 'failed',\n          outDir: '',\n          summaryPath: '',\n          reportPath: (err as Error).message,\n        });\n      });\n  }, [props.runPromise]);\n\n  const [showLogs, setShowLogs] = useState(false);\n  const [_showScores, setShowScores] = useState(false);\n  useInput((input, key) => {\n    if (input === 'q' || key.escape) process.exit(0);\n    if (input === 'l') setShowLogs(v => !v);\n    if (input === 's') setShowScores(v => !v);\n  });\n\n  if (!done) {\n    return <RunScreen events={props.events} showLogs={showLogs} />;\n  }\n\n  if (done === null) {\n    return (\n      <Box>\n        <Text>dry-run complete</Text>\n      </Box>\n    );\n  }\n\n  return <SummaryScreen result={done} />;\n}\n","import React from 'react';\nimport { Box, Text } from 'ink';\nimport type { RunnerEvent } from '../../core/runner/orchestrator';\nimport { ModelTable } from '../components/ModelTable';\nimport { LogsPanel } from '../components/LogsPanel';\nimport { QuestionPanel } from '../components/QuestionPanel';\n\nexport function RunScreen(props: { events: RunnerEvent[]; showLogs: boolean }) {\n  const last = props.events[props.events.length - 1];\n  const runId = props.events.find(e => e.type === 'run_started')?.runId;\n\n  const completed = props.events.filter(e => e.type === 'question_completed').length;\n  const failed = props.events.filter(e => e.type === 'question_failed').length;\n\n  return (\n    <Box flexDirection=\"column\" paddingX={1}>\n      <Text bold>apocbench</Text>\n      <Text>run: {runId ?? 'starting...'}</Text>\n      <Text>\n        progress: {completed} done, {failed} failed\n      </Text>\n      <Text>controls: l=logs s=scores q=quit</Text>\n\n      <Box marginTop={1}>\n        <ModelTable events={props.events} />\n      </Box>\n\n      <Box marginTop={1}>\n        <QuestionPanel events={props.events} />\n      </Box>\n\n      <Box marginTop={1}>\n        <Text>\n          last: {last ? JSON.stringify(last).slice(0, 120) : '...'}\n        </Text>\n      </Box>\n\n      {props.showLogs ? (\n        <Box flexDirection=\"column\" marginTop={1}>\n          <LogsPanel events={props.events} />\n        </Box>\n      ) : null}\n    </Box>\n  );\n}\n","import React from 'react';\nimport { Box, Text } from 'ink';\nimport type { RunnerEvent } from '../../core/runner/orchestrator';\n\nexport function ModelTable(props: { events: RunnerEvent[] }) {\n  const byModel = new Map<string, { done: number; failed: number; scoreSum: number }>();\n  for (const e of props.events) {\n    if (e.type === 'question_completed') {\n      const row = byModel.get(e.modelId) ?? { done: 0, failed: 0, scoreSum: 0 };\n      row.done += 1;\n      row.scoreSum += e.overallScore;\n      byModel.set(e.modelId, row);\n    }\n    if (e.type === 'question_failed') {\n      const row = byModel.get(e.modelId) ?? { done: 0, failed: 0, scoreSum: 0 };\n      row.failed += 1;\n      byModel.set(e.modelId, row);\n    }\n  }\n\n  const rows = Array.from(byModel.entries()).sort(([a], [b]) => a.localeCompare(b));\n  return (\n    <Box flexDirection=\"column\">\n      <Text bold>models</Text>\n      {rows.length === 0 ? <Text>(waiting)</Text> : null}\n      {rows.map(([modelId, r]) => (\n        <Text key={modelId}>\n          {modelId}  done:{r.done}  failed:{r.failed}  score:{r.scoreSum.toFixed(2)}\n        </Text>\n      ))}\n    </Box>\n  );\n}\n","import React from 'react';\nimport { Box, Text } from 'ink';\nimport type { RunnerEvent } from '../../core/runner/orchestrator';\n\nexport function LogsPanel(props: { events: RunnerEvent[] }) {\n  return (\n    <Box flexDirection=\"column\">\n      <Text bold>logs</Text>\n      {props.events.slice(-12).map((e, i) => (\n        <Text key={i}>{JSON.stringify(e)}</Text>\n      ))}\n    </Box>\n  );\n}\n","import React from 'react';\nimport { Box, Text } from 'ink';\nimport type { RunnerEvent } from '../../core/runner/orchestrator';\n\nexport function QuestionPanel(props: { events: RunnerEvent[] }) {\n  const lastStart = [...props.events].reverse().find(e => e.type === 'question_started');\n  if (!lastStart || lastStart.type !== 'question_started') {\n    return (\n      <Box flexDirection=\"column\">\n        <Text bold>question</Text>\n        <Text>(waiting)</Text>\n      </Box>\n    );\n  }\n\n  return (\n    <Box flexDirection=\"column\">\n      <Text bold>question</Text>\n      <Text>\n        {lastStart.questionId} ({lastStart.modelId})\n      </Text>\n    </Box>\n  );\n}\n","import React from 'react';\nimport { Box, Text } from 'ink';\n\nexport function SummaryScreen(props: {\n  result: { runId: string; outDir: string; summaryPath: string; reportPath: string };\n}) {\n  return (\n    <Box flexDirection=\"column\" paddingX={1}>\n      <Text bold>completed</Text>\n      <Text>runId: {props.result.runId}</Text>\n      <Text>outDir: {props.result.outDir}</Text>\n      <Text>summary: {props.result.summaryPath}</Text>\n      <Text>report: {props.result.reportPath}</Text>\n      <Text>press q to quit</Text>\n    </Box>\n  );\n}\n"],"mappings":"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","names":["z","z","fs","path","z","z","path","fs","z","fs","path","z","fs","fs","path","fs","path","fs","path","path","fs","path","fs","Box","Text","Box","Text","Box","Text","jsx","jsxs","Box","Text","jsx","jsxs","jsx","jsxs","Box","Text","Box","Text","jsx","jsxs","jsx","Box","Text","fs","path","jsx"]}